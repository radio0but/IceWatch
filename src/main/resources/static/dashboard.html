<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
<head>
    <link rel="icon" type="image/png" href="${favicon}">
    <meta charset="UTF-8">
    <title>Tableau de bord - Administration Radio</title>
    <link rel="stylesheet" href="/css/dashboard/index.css">
    <style>${custom.css}</style>
</head>
<body>
<h1>Tableau de bord - Administration Radio</h1>

<div class="tabs">
    <button class="tab-button active" data-tab="slots">ğŸ“… CrÃ©neaux</button>
    <button class="tab-button" data-tab="rss">ğŸ—ï¸ Journal</button>
    <button class="tab-button" data-tab="users">ğŸ‘¥ Utilisateurs</button>
    <button class="tab-button" data-tab="appearance">ğŸ§‘â€ğŸ¨ Personnalisation</button>
    <button class="tab-button" data-tab="maintenance">ğŸ› ï¸ Maintenance</button>


</div>

<!-- Onglet Journal -->
<div id="tab-rss" class="tab-content">
  <h2>ğŸ—ï¸ Journal Ã©tudiant (via flux RSS)</h2>

  <p>Ce module permet dâ€™afficher automatiquement les derniers articles dâ€™un journal Ã©tudiant externe (ex: WordPress) dans la page dâ€™accueil.</p>

  <label for="rss-url">ğŸ”— URL du flux RSS :</label>
  <input type="text" id="rss-url" placeholder="https://exemple.com/feed" />

  <div style="display: flex; gap: 1rem; margin-top: 1rem;">
    <button onclick="testRSS()">ğŸ” Tester le lien</button>
    <button onclick="saveRSS()">ğŸ’¾ Enregistrer</button>
    <div style="margin-top: 1rem;">
  <label>
    <input type="checkbox" id="rss-show-images" />
    ğŸ–¼ï¸ Afficher les images des articles RSS
  </label>
</div>
    <span id="rss-status" style="align-self: center;"></span>
  </div>
</div>


<!-- Onglet Utilisateurs -->
<div id="tab-users" class="tab-content active">
    <h2>Gestion des utilisateurs</h2>
    <table>
        <thead>
            <tr>
                <th>Nom d'utilisateur</th>
                <th>RÃ´les</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="user-list">
            <!-- Rempli dynamiquement -->
        </tbody>
    </table>

    <form action="/admin/create" method="post">
        <h3>CrÃ©er un nouvel utilisateur</h3>
        <input type="text" name="username" placeholder="Nom d'utilisateur" required />
        <input type="password" name="password" placeholder="Mot de passe" required />
        <select name="role">
            <option value="USER">Utilisateur</option>
            <option value="ADMIN">Administrateur</option>
        </select>
        <button type="submit">CrÃ©er</button>
    </form>
</div>

<!-- Onglet ParamÃ¨tres -->
<div id="tab-appearance" class="tab-content">
  <h2>ğŸ§‘â€ğŸ¨ Personnalisation de lâ€™apparence</h2>

  <p>
    <strong>Instructions :</strong><br>
    Toutes les options de personnalisation peuvent Ãªtre modifiÃ©es depuis cette interface.
    <ul style="margin-top:0;">
      <li><strong>1.</strong> Cliquez sur <strong>â™»ï¸ RÃ©initialiser Apparence</strong> pour repartir dâ€™une base propre, si nÃ©cessaire.</li>
      <li><strong>2.</strong> Modifiez les paramÃ¨tres dans la zone ci-dessous.</li>
      <li><strong>3.</strong> Cliquez sur <strong>ğŸ“ Enregistrer</strong> pour appliquer vos modifications.</li>
      <li><strong>4.</strong> Rechargez la page si vous souhaitez voir les effets visuels dans le tableau de bord.</li>
    </ul>
    Les modifications sont appliquÃ©es immÃ©diatement aprÃ¨s lâ€™enregistrement.
  </p>

  <textarea id="properties-editor" rows="15" style="width:100%;"></textarea>
  <button id="save-button">ğŸ“ Enregistrer</button>
  <button id="reset-button" class="danger">â™»ï¸ RÃ©initialiser Apparence</button>

  <h3>ğŸ“ Calepin de notes</h3>
  <p style="margin-top: -0.5rem;">
    Utilisez cet espace pour conserver des notes sur vos thÃ¨mes, configurations ou commentaires techniques. Les modifications sont sauvegardÃ©es automatiquement.
  </p>
  <textarea id="appearance-notes" rows="8" style="width:100%; resize:vertical; font-family:monospace;" placeholder="Vos notes iciâ€¦">\${notes}</textarea>
</div>
<!-- Onglet CrÃ©neaux -->
<!-- Onglet CrÃ©neaux -->
<div id="tab-slots" class="tab-content">
    <h2>Planning des crÃ©neaux</h2>
    <div class="legend">
        <span>ğŸ“» = Radio</span>
        <span>ğŸ“º = VidÃ©o</span>
        <span class="status-live">ğŸ”´ En direct</span>
        <span class="status-auto">âš™ï¸ Automatique</span>
        <span class="status-empty">âšª Vide</span>
    </div>
    <div class="schedule-wrapper">
  <div id="schedule-grid">
      <!-- La grille sera gÃ©nÃ©rÃ©e en JS -->
  </div>
</div>
</div>

<!-- Onglet RedÃ©marrage -->
<div id="tab-maintenance" class="tab-content">
  <h2>RedÃ©marrer IceWatch & Schedulers</h2>
  <p>Utilisez ces boutons pour redÃ©marrer les services.</p>

  <button id="restart-button" class="danger">
    ğŸš¨ RedÃ©marrer IceWatch <span id="status-restart"></span>
  </button>

  <div style="margin-top: 1rem;">
    <button id="restart-video-button" class="danger">
      ğŸ¬ RedÃ©marrer VidÃ©o Scheduler <span id="status-restart-video"></span>
    </button>
    <button id="restart-radio-button" class="danger">
      ğŸ“» RedÃ©marrer Radio Scheduler <span id="status-restart-radio"></span>
    </button>

    <h3 style="margin-top: 2rem;">ğŸ¬ Logs VidÃ©o Scheduler</h3>
    <button id="refresh-log-video">
      ğŸ”„ Actualiser <span id="status-log-video"></span>
    </button>
    <textarea id="log-video" rows="12" readonly style="width:100%; margin-top:0.5rem;"></textarea>
  </div>

  <div style="margin-top: 0.5rem;">
    <h3 style="margin-top: 2rem;">ğŸ“» Logs Radio Scheduler</h3>
    <button id="refresh-log-radio">
      ğŸ”„ Actualiser <span id="status-log-radio"></span>
    </button>
    <textarea id="log-radio" rows="12" readonly style="width:100%; margin-top:0.5rem;"></textarea>
  </div>
</div>



<div id="Home" style="margin-top: 20px; text-align: center;">
  <button class="tab-button" onclick="location.href='/index'">ğŸ“»Revenir Ã  la radio</button>
</div>

<script type="module" src="/js/dashboard/index.js"></script>
</body>
</html>
