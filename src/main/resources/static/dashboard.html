<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Tableau de bord - Administration Radio</title>
    <link rel="stylesheet" href="/css/dashboard.css">
    <style>${custom.css}</style>
</head>
<body>
<h1>Tableau de bord - Administration Radio</h1>

<div class="tabs">
    <button class="tab-button active" data-tab="slots">ğŸ“… CrÃ©neaux</button>
    <button class="tab-button" data-tab="users">ğŸ‘¥ Utilisateurs</button>
    <button class="tab-button" data-tab="settings">âš™ï¸ ParamÃ¨tres</button>
    <button class="tab-button" data-tab="restart">ğŸ”„ RedÃ©marrer</button>
</div>
<!-- Onglet Utilisateurs -->
<div id="tab-users" class="tab-content active">
    <h2>Gestion des utilisateurs</h2>
    <table>
        <thead>
            <tr>
                <th>Nom d'utilisateur</th>
                <th>RÃ´les</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="user-list">
            <!-- Rempli dynamiquement -->
        </tbody>
    </table>

    <form action="/admin/create" method="post">
        <h3>CrÃ©er un nouvel utilisateur</h3>
        <input type="text" name="username" placeholder="Nom d'utilisateur" required />
        <input type="password" name="password" placeholder="Mot de passe" required />
        <select name="role">
            <option value="USER">Utilisateur</option>
            <option value="ADMIN">Administrateur</option>
        </select>
        <button type="submit">CrÃ©er</button>
    </form>
</div>

<!-- Onglet ParamÃ¨tres -->
<div id="tab-settings" class="tab-content">
    <h2>Personnaliser</h2>
<p>
  <strong>Instructions :</strong><br>
  Avant de modifier les paramÃ¨tres :
  <ul style="margin-top:0;">
    <li><strong>1.</strong> Cliquez sur <strong>â™»ï¸ RÃ©initialiser Apparence</strong> pour repartir dâ€™une configuration propre.</li>
    <li><strong>2.</strong> Si vous aviez une configuration existante, copiez-la avant et recoller les sections utiles aprÃ¨s la rÃ©initialisation.</li>
    <li><strong>3.</strong> Modifiez les paramÃ¨tres souhaitÃ©s, puis cliquez sur <strong>ğŸ’¾ Enregistrer</strong>.</li>
    <li><strong>4.</strong> <span style="color:red;">RedÃ©marrez IceWatch</span> via lâ€™onglet <strong>ğŸ”„ RedÃ©marrer</strong> pour appliquer les changements.</li>
  </ul>
  Les modifications ne seront prises en compte quâ€™aprÃ¨s le redÃ©marrage du service IceWatch.
</p>


<details style="margin-bottom:1rem;">
  <summary style="cursor:pointer; font-weight:bold;">ğŸ¨ ParamÃ¨tres d'apparence disponibles (cliquez pour afficher)</summary>
  <pre style="background:#eee; padding:1rem; overflow:auto; font-size:0.9rem; border-radius:6px;">
# Titre HTML avec styles (affichÃ© en haut)
appearance.radio-title=&lt;span style='color:#e53935; font-weight:bold;'&gt;Radio&lt;/span&gt;Rosemont

# Message d'accueil (HTML autorisÃ©)
appearance.welcome-message=&lt;p style='text-align:center; font-size:1.1rem;'&gt;Bienvenue...&lt;/p&gt;

# Titre de la page de connexion (onglet navigateur)
appearance.login-title=Connexion | Radio Rosemont

# CSS personnalisÃ© injectÃ©
appearance.custom-css=body { background: black; }

# Bloc HTML personnalisÃ© (ajoutÃ© sous le message dâ€™accueil)
appearance.custom-html=&lt;div&gt;Contenu personnalisÃ© ici&lt;/div&gt;

# Titre brut (sans HTML) pour mÃ©tadonnÃ©es
appearance.radio-plain-title=Radio Rosemont

# Favicon (chemin vers image .ico ou .png)
appearance.favicon=/favicon.png
  </pre>
</details>

    <textarea id="properties-editor" rows="15" style="width:100%;"></textarea>
    <button onclick="saveProperties()">ğŸ’¾ Enregistrer</button>
    <button onclick="resetAppearance()" class="danger">â™»ï¸ RÃ©initialiser Apparence</button>

</div>
<!-- Onglet CrÃ©neaux -->
<!-- Onglet CrÃ©neaux -->
<div id="tab-slots" class="tab-content">
    <h2>Planning des crÃ©neaux</h2>
    <div class="legend">
        <span>ğŸ“» = Radio</span>
        <span>ğŸ“º = VidÃ©o</span>
        <span class="status-live">ğŸ”´ En direct</span>
        <span class="status-auto">âš™ï¸ Automatique</span>
        <span class="status-empty">âšª Vide</span>
    </div>
    <div class="schedule-wrapper">
  <div id="schedule-grid">
      <!-- La grille sera gÃ©nÃ©rÃ©e en JS -->
  </div>
</div>
</div>

<!-- Onglet RedÃ©marrage -->
<div id="tab-restart" class="tab-content">
    <h2>RedÃ©marrer IceWatch</h2>
    <p>Utilisez ce bouton pour redÃ©marrer le service <strong>IceWatch</strong>.</p>
    <button onclick="restartIceWatch()" class="danger">ğŸš¨ RedÃ©marrer maintenant</button>
</div>

<script src="/js/dashboard.js"></script>
</body>
</html>
